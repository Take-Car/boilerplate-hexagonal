services:
  _defaults:
    public: false
    autowire: true

  Domain\Command\:
    resource: '%kernel.project_dir%/src/Domain/Command/**/Handler.php'

  Domain\Event\:
    resource: '%kernel.project_dir%/src/Domain/Event/**/Handler.php'

  Domain\Query\:
    resource: '%kernel.project_dir%/src/Domain/Query/**/Handler.php'

  Domain\BusInterface: '@Infrastructure\Messenger\Bus'

  Infrastructure\Messenger\Bus:
    arguments:
      $commandBus: '@messenger.command.bus'
      $queryBus: '@messenger.query.bus'
      $eventBus: '@messenger.event.bus'
